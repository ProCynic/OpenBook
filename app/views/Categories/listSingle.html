#{extends 'two_panel.html' /} 

#{set 'title'} OpenBook :: ${category.name} #{/set}


<h2><a href="/threads">Public Threads</a> / ${category.name}</h2>
  
  <div class="well">
  
  <div class="row-fluid buttons">
   <a class="btn btn-primary" data-toggle="modal" href="#create-thread" 
      id="newItem">Create new thread</a>
  </div>
  
  <div class="row-fluid header">
   <div class="span8"><h3>Thread</h3></div>
   <div class="span4"><h3>Last post</h3></div>
  </div>
  
  #{if FThreads.size()} 
    #{list items:FThreads, as:'FThread'}
      <div class="row-fluid category" id="cat-${FThread.id}">
      <div class="span8 cat-name">
         <h4><a href="/threads/${FThread.category.id}/${FThread.id}">${FThread.title}</a></h4>
       </div>
       #{if FThread.comments().size() > 0}
       <div class="span4 thread-latest">
	       <a href="/?id=${FThread.last_comment().owner.id}">
	         ${FThread.last_comment().owner}
	       </a><br />
         ${FThread.last_comment().createdAt.format('M-d-yy, h:mm a')}
       </div>
       #{/if}
       #{else}
       <div class="span4 thread-latest">
        <a href="/?id=${FThread.owner.id}">${FThread.owner}</a><br />
          ${FThread.postedAt.format('M-d-yy, h:mm a')}
       </div>
       #{/else}
      </div>
    #{/list}
  #{/if}
  #{else}
  <div class="row-fluid cat-empty">
   There are no threads in this category.
  </div>  
  #{/else}
  
</div>
