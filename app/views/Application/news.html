#{extends 'three_panel.html' /}
<ul class="nav nav-pills">
  <li><a href="#">Update Status</a></li>
  <li><a href="#">Add Photo</a></li>
  <li><a href="#">Share Link</a></li>
  <li><a href="#">Ask Question</a></li>
  #{if user.id != currentUser.id}
    <li><a href="@{Posts.poke(user.id)}">Poke!</a></li>
  #{/if}
        

  #{if user.id == currentUser.id}
    <li><a id="about-button" href="@{Application.edit_basic}">About me</a></li>
  #{/if}
  #{else}
    <li><a id="about-button" href="@{Application.about(user.id)}">About ${user.first_name}</a></li>
  #{/else}

  #{if user.checkFriendship(user.id) == 'Request Friendship'}
    <li>
      <a id="friend-button" href="@{Application.requestFriends(user.id)}">
        ${user.checkFriendship(user.id)}
      </a>
    </li>
  #{/if}
  #{elseif user.checkFriendship(user.id) == 'Friendship Requested'}
    <li><p>Friendship Requested</p></li>
  #{/elseif}
  #{elseif user.checkFriendship(user.id) == 'Friends'}
    <li>
      Friends :) 
      <a id="friend-button" href="@{Application.removeFriends(user.id)}">
        Remove friend
      </a>
    </li>
  #{/elseif}
</ul>
    

#{if user.id == currentUser.id}
  <div class="ui_InputContainer" id="PostContainer" style="margin-bottom: 2em;">
    <textarea name="post_content" id="postContent" style="width: 100%;">new post...</textarea>
    <button id="postSubmit" class="btn btn-primary" onclick="submitPost()"><i class="icon-plus"></i> Post</button>
  </div>

  <!--
  <div class="ui_InputContainer" id="photo-upload" style="display: none;">
    #{form @Photos.addPhoto(), enctype:'multipart/form-data'} 
      <input type="file" name="image" />
      <input type="text" name="content" value="Add a caption" />
      <input type="submit" name="submit" value="Upload" /> 
    #{/form}
  </div>

  <div class="ui_inputContainer" id="link-upload" style="display: none">
    #{form @Links.addLink(), enctype:'multipart/form-data'}
      <input type="text" name="url" value="video url" />
      <input type="text" name="content" value="new post..." />
      <input type="submit" name="submit" value="Upload" />
    #{/form}
  </div>
  -->
#{/if}


<h3>News</h3>
<ul class="unstyled" id="post-list">
  #{list items:user.news(), as:'item'} 
    <li>#{post currentUser:currentUser,user:user,item:item /}</li>
  #{/list}
</ul>

<script src="/public/javascripts/post.js"></script>

<!--

<script>
  /*Show before resizing, with jQuery to avoid glitchy redisplay*/
  $('textarea#postContent').css('display','inline-block');
  $('input#postSubmit').css('display', 'inline-block');

  /*autoResize*/
  $('textarea#postContent').autoResize({
  maxHeight: 150,
  minHeight: 50,
  extraSpace: 30
  });
  
  /*autoResize*/
  $('textarea#commentContent').autoResize({
  maxHeight: 70,
  minHeight: 20,
  extraSpace: 20
  }); 
  
  
</script>

<script>
  $('#postContent').val(defaultPost);
  $('#postContent')
  .focusin(function() {
  if ( hasTypedPost == false ) {
  this.value = '';    
  }
  })
  .focusout(function() {
  if ( this.value == '' ) {
  hasTypedPost = false;
  this.value = defaultPost;    
  }
  });
</script>
-->
